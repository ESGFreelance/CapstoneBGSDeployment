@{
    Layout = "~/TerraTech/TerraShared/CommunityUser.cshtml";
}

<!DOCTYPE html>
<html>
<head>
    <style>
        /*imgNotDone {
            -webkit-filter: grayscale(100%);*/ /* Safari 6.0 - 9.0 */
        /*filter: grayscale(100%);
        }*/
    </style>

</head>
<body>

    <div class="card mb-4">
        <div class="card-header"></div>


        <div class="card-body">

            <h1 align="center">MY ACHIEVEMENTS</h1>
            <div class="control-label col-xs-12 col-sm-4">
                <label class="asteriskRequired"></label>
            </div>

            <div class="row">
                <!--MEDAL FOR TOP MONTHLY AND YEARLY SHOULD BE PUT HERE-->
                <div class="col-md-3">
                    <center>
                        <em>Top 1 Yearly/Monthly</em>
                    </center>
                </div>

                <!--DATATABLE SHOULD BE PRESENT HERE IN THIS COLUMN AND WORKING FINE-->
                <div class="col-md-9">
                    @*<table id="SubmittedTable" class="table table-hover table-striped table-bordered table-responsive-sm" cellspacing="0" style="width:100%; "></table>*@
                </div>
            </div>

        </div>

        <div class="card-footer small text-muted"></div>
    </div>
    <div class="row">

        <!--LAND ACHIEVEMENTS SHOULD BE PUT HERE-->
        <!--ARRANGEMENTS FOR ACCEPTED REPORT 5-50-->
        <!--ALTERNATIVE NAME FOR IF THE PICTURE WILL NOT LOAD AND FOR THE PURPOSE OF EASY TO SEARCH-->
        <div class="col-md-6">
            <div class="card-header" style="text-align:center;">Land Achievements</div>
            <center>
                <img src="https://i.imgur.com/tbvsToi.png" alt="Earth Bender" style="width:150px;height:150px;" data-toggle="popover-click" data-content="<h1>Earth Bender</h1>">
                <img src="https://i.imgur.com/tumzAvf.png" alt="Buddy of Land" style="width:150px;height:150px;" data-toggle="popover-click" data-content="<h1>Buddy of Land</h1>">
                <img src="https://i.imgur.com/OpFV67c.png" alt="The Value of Land" style="width:150px;height:150px;" data-toggle="popover-click" data-content="<h1>The Value of Land</h1>">
                <img src="https://i.imgur.com/Dhgi0oO.png" alt="Land Expert" style="width:150px;height:150px;" data-toggle="popover-click" data-content="<h1>Land Expert</h1>">
                <img src="https://i.imgur.com/AQel0J2.png" alt="True Hero in Land" style="width:150px;height:150px;" data-toggle="popover-click" data-content="<h1>True Hero in Land</h1>">
                <img src="https://i.imgur.com/honNJIR.png" alt="Land Lover" style="width:150px;height:150px;" data-toggle="popover-click" data-content="<h1>Land Lover/h1>">
                <img src="https://i.imgur.com/mQ3u2gw.png" alt="Captain Saver of Land" style="width:150px;height:150px;" data-toggle="popover-click" data-content="<h1>Captain Saver of Land</h1>">
            </center>
            <div class="card-footer"></div>
        </div>

        <!--WATER ACHIEVEMENTS SHOULD BE PUT HERE-->
        <!--ARRANGEMENTS FOR ACCEPTED REPORT 5-50-->
        <!--ALTERNATIVE NAME FOR IF THE PICTURE WILL NOT LOAD AND FOR THE PURPOSE OF EASY TO SEARCH-->
        <div class="col-md-6">
            <div class="card-header" style="text-align:center;">Water Achievements</div>
            <center>
                <img src="https://i.imgur.com/6qb53EO.png" alt="Water Bender" style="width:150px;height:150px;" data-toggle="popover-click" data-content="<h1>Water Bender</h1>">
                <img src="https://i.imgur.com/kIIlo6i.png" alt="Buddy of Water" style="width:150px;height:150px;" data-toggle="popover-click" data-content="<h1>Buddy of Water</h1>">
                <img src="https://i.imgur.com/M4xGarE.png" alt="The Value of  Water" style="width:150px;height:150px;" data-toggle="popover-click" data-content="<h1>The Value of  Water</h1>">
                <img src="https://i.imgur.com/bArM4XD.png" alt="Water Expert" style="width:150px;height:150px;" data-toggle="popover-click" data-content="<h1>Water Expert</h1>">
                <img src="https://i.imgur.com/RlfUxJ3.png" alt="True Hero in Water" style="width:150px;height:150px;" data-toggle="popover-click" data-content="<h1>True Hero in Water</h1>">
                <img src="https://i.imgur.com/Iqfl9Kl.png" alt="Water Lover" style="width:150px;height:150px;" data-toggle="popover-click" data-content="<h1>Water Lover</h1>">
                <img src="https://i.imgur.com/9ctp4iA.png" alt="Captain Saver of Water" style="width:150px;height:150px;" data-toggle="popover-click" data-content="<h1>Captain Saver of Water</h1>">
            </center>
            <div class="card-footer"></div>
        </div>

    </div>
    <!--<img src="https://i.imgur.com/XTUH37q.png" style="width:250px;height:250px; filter: grayscale(100%);" data-toggle="popover-click" data-content="<h1>Hello Wworld</h1>">
    <img src="https://i.imgur.com/XTUH37q.png" style="width:250px;height:250px;" data-toggle="popover-click" data-content="<h1>Hello Wworld</h1>">-->

    <div class="row">

        <!--OVERALL ACHIEVEMENTS SHOULD BE PUT HERE-->
        <!--ARRANGEMENTS FOR FIRST REPORT THEN 1 ARE,A 2-5 DIFFERENT AREAS, AND REACHED 100 ACCEPTED REPORTS-->
        <!--ALTERNATIVE NAME FOR IF THE PICTURE WILL NOT LOAD AND FOR THE PURPOSE OF EASY TO SEARCH-->

        <div class="col-md-6">
            <div class="card-header" style="text-align:center;">Overall Achievements</div>
            <center>
                <img src="https://i.imgur.com/fQWwWWs.png" alt="Helper" style="width:150px;height:150px;" data-toggle="popover-click" data-content="<h1>Helper</h1>">
                <img src="https://i.imgur.com/bC8MSUS.png" alt="Unknown Helper" style="width:150px;height:150px;" data-toggle="popover-click" data-content="<h1>Unknown Helper</h1>">
                <img src="https://i.imgur.com/NfOsGMU.png" alt="Making Changes" style="width:150px;height:150px;" data-toggle="popover-click" data-content="<h1>Making Changes</h1>">
                <img src="https://i.imgur.com/1Oq8PkM.png" alt="Ally of Environment" style="width:150px;height:150px;" data-toggle="popover-click" data-content="<h1>Ally of Environment</h1>">
                <img src="https://i.imgur.com/hqptj8Q.png" alt="Friendly Nature" style="width:150px;height:150px;" data-toggle="popover-click" data-content="<h1>Friendly Nature</h1>">
                <img src="https://i.imgur.com/xRzUC4N.png" alt="True Supporter" style="width:150px;height:150px;" data-toggle="popover-click" data-content="<h1>True Supporter/h1>">
                <img src="https://i.imgur.com/zL7MNGo.png" alt="The One" style="width:150px;height:150px;" data-toggle="popover-click" data-content="<h1>The One</h1>">
            </center>
            <div class="card-footer"></div>
        </div>
    </div>

</body>
</html>


<script>


    $(document).ready(function () {

        LoadSubmittedTable();
        $('[data-toggle="popover-hover"]').popover({
            html: true,
            trigger: 'hover',
            placement: 'bottom',
            content: function () { return '<img src="' + $(this).data('img') + '" />'; }
        });

        // popovers initialization - on click
        $('[data-toggle="popover-click"]').popover({
            html: true,
            trigger: 'click',
            placement: 'top',
            content: function () { return '<img src="' + $(this).data('img') + '" />'; }
        });



    });


    // popovers initialization - on hover

    function LoadSubmittedTable() {
        table = $('#SubmittedTable').DataTable({
            bLengthChange: false,
            destroy: true,
            responsive: true,
            searching: false, paging: false, info: false,
            pageLength: 3,
            order: [[1, 'asc']],
            ajax: {
                type: "GET",
                "url": "/DataGet/GetCurrentCaseReport",
                data: {
                    UpdatedStatusID: 1,
                },
                dataSrc: function (json) {
                    var a = new Array();
                    for (var b = 0; b <= json.length - 1; b++) {
                        var c = json[b];
                        a.push({
                            'CaseReportID': c.CaseReportID,
                            'UserInformationID': c.UserInformationID,
                            'FamilyName': c.FamilyName,
                            'GivenName': c.GivenName,
                            'MaidenName': c.MaidenName,
                            'FullName': c.GivenName + " " + c.MaidenName + " " + c.FamilyName,
                            'EnvironmentalConcernID': c.EnvironmentalConcernID,
                            'DateReported': c.DateReported,
                            'Concern': c.Concern,
                            'UpdatedStatus': c.UpdatedStatus,
                            'UpdatedStatusDate': c.UpdatedStatusDate,
                            'CaseLocation': c.CaseLocation,
                            'XCoordinates': c.XCoordinates,
                            'YCoordinates': c.YCoordinates,
                            'Coordinates': "(" + c.XCoordinates + "," + c.YCoordinates + ")",
                            'DateUpdated': c.DateUpdated,
                            'Notes': c.Notes,
                            'CaseReportPhoto': c.CaseReportPhoto,
                            'Base64Photo': c.Base64Photo
                        });
                    }
                    return a;
                },
            },
            columns: [

                {
                    title: "No.",
                    data: "CaseReportID"
                },
                {
                    title: "Date",
                    data: "DateReported",
                    "render": function (value) {
                        if (value === null) return "";

                        var pattern = /Date\(([^)]+)\)/;
                        var results = pattern.exec(value);
                        var dt = new Date(parseFloat(results[1]));

                        return (dt.getMonth() + 1) + "/" + dt.getDate() + "/" + dt.getFullYear();
                    }
                },
                {
                    title: "Date Updated",
                    data: "UpdatedStatusDate",
                    "render": function (value) {
                        if (value === null) return "";

                        var pattern = /Date\(([^)]+)\)/;
                        var results = pattern.exec(value);
                        var dt = new Date(parseFloat(results[1]));

                        return (dt.getMonth() + 1) + "/" + dt.getDate() + "/" + dt.getFullYear();
                    },
                    visible: false
                },

                {
                    title: "Area",
                    data: "CaseLocation"
                },
                {
                    title: "Concern",
                    data: "Concern"
                },

            ],
            'columnDefs': [
                {
                    "className": "dt-center", "targets": "_all"
                }],
        });

        return table;
    };
</script>
